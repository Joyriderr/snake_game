## 项目思路

​		该项目将采集到的数据即**data-file文件**中的数据通过IO流输出后由数据采集中心进行采集，然后再将数据放入数据库中进行接收和入库操作，最后通过web页面对收集到的数据进行展示，所以根据这些需求从业务逻辑方面将该项目分为三个模块

## Client

​		作为客户端发送并整理所采集的数据，整理数据

### GatherImpl

​		在GatherImpl类中通过继承Gather接口完成数据的采集，利用缓冲流BufferedReader对数据所在的文件进行读取，读取时使用**split**对数据进行分割并根据相对应的条件对数据处理后放入Collection集合中

​		其中通过Properties类读取XMl配置文件获取数据文件的路径

​		在创建Environment对象时会涉及到重复创建对象的问题，所以用到了**拷贝对象**，具体用法需要定义一个私有的方法，这个方法用于复制Environment对象，其中这个方法会使用Environment的构造函数用于创建这个新的实例，并用传入的对象获取所需要的对应的属性

### ClientImpl

#### send

​		在send方法中用Socket建立数据传输的ip地址和端口号连接用于网络通信，创建一个新的对象输出流，使用socket的输出流进行数据写入，将传入的Environment对象集合写入到对象输出流中

#### setConfiguration

​		在setConfiguration方法中从传入的配置对象中获取日志对象

#### init

​		在init方法中通过Properties类读取XMl配置文件获取ip和端口号

### ClientMain

​		执行客户端发送过来的采集的数据，从ConfigurationImpl类获取一个单例实例，从单例中获取Gather、client对象并赋值给gather、client变量

## common

​		定义公共模块和公共使用的部分，异常类，日常配置

### ConfigurationImpl

​		在这个实现类中用**dom4j**对XML文件进行读写，使用**SAXreader**对XML文件进行解析，通过文件中class的属性和子元素的名称，利用反射创建相应的对象并存储在Map集合中，同时将子元素的名称和文本内容存储到properties对象中

## Server

​		作为服务器接收采集的数据，并对采集的数据作入库操作，在入库时对数据进行处理后入库

### JDBCUtil

​		用于从"druid.properties"配置文件中读取数据库连接的配置信息，包括数据源、URL、用户名和密码。通过使用JDBC和Druid连接池进行数据库的连接和简化操作

### ServerImpl

​		在ServerImpl中完成了对服务器的实现，主要功能是监听端口，接收客户端的数据，再将数据保存到数据库中

​		在监听客户端的连接时，需要用到变量stop控制while循环，直到stop变为true时结束监听。在while循环中，使用线程池可以接收多个客户端的连接，并且每个连接都会创建一个新的线程进行处理，处理后通过DBstore接口中的saveDB方法将处理的数据保存在数据库中

### DbStoreImpl

​		这个类是数据库存储的实现部分，通过使用**Calendar**类获取数据日期并通过对应的日期将不同天数的数据通过sql语句将处理的数据插入到对应的数据表中。

​		其中定义一个语句对象，对这个语句对象进行判断，如果这个语句对象还未进行初始化，那么会使用连接对象准备一个预编译的sql语句，如果当前的天数与前一天的天数不同，则执行批处理，清除批处理操作，并重新准备一个新的SQL语句。然后更新前一天的天数为当前的天数。

### ServerMain

​		实现服务器的主程序		

​		通过调用ConfigurationImpl类的getInstance()方法获取单例实例，调用该单例实例的getServer()方法，从配置中获取或创建一个服务器实例，将返回的服务器实例赋值给变量。